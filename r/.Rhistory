quit()
quit()
print("test")
R.version
.libPaths()
setwd("~/Documents/compare-dataviz-tools")
data <- read.table("HadCRUT4-gl-dowload20170601.dat", fill = TRUE)
View(data)
temp <- data[seq(1, nrow(data) / 2, by = 2),]
View(temp)
nrow(data)
temp <- data[seq(1, nrow(data), by = 2),]
View(temp)
cove <- data[seq(2, nrow(data), by = 2),]
View(cove)
??months
month.abb
month.name
names(data) = c("Year", months.abb, "Annual")
names(data) = c("Year", month.abb, "Annual")
View(data)
is.na(cove)
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
is.na(cove)
subset(temp, -c(Year, Annual))
subset(temp, select = -c(Year, Annual))
subset(temp, select = -c(Year, Annual)) * is.na(subset(cove, -Year))
subset(temp, select = -c(Year, Annual)) * is.na(subset(cove, -Year)))
subset(temp, select = -c(Year, Annual)) * is.na(subset(cove, select = -Year))
temp[month.abb] = subset(temp, select = -c(Year, Annual)) * is.na(subset(cove, select = -Year))
View(temp)
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
temp[month.abb] = subset(temp, select = -c(Year, Annual)) * !is.na(subset(cove, select = -Year))
temp[month.abb] = temp[month.abb] * !is.na(cove[month.abb])
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
temp[month.abb] = temp[month.abb] * !is.na(cove[month.abb])
View(temp)
1 * NA
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
temp[month.abb] = temp[month.abb] * (cove[month.abb] / cove[month.abb])
View(temp)
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
temp[month.abb] = temp[month.abb] * (cove[month.abb] - cove[month.abb] + 1)
View(temp)
5 * (NA - NA + 1)
data <- read.table("HadCRUT4-gl-dowload20170601.dat", fill = TRUE)
names(data) = c("Year", month.abb, "Annual")
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
(cove[month.abb] - cove[month.abb] + 1)
View(cove[month.abb] - cove[month.abb] + 1)
View(cove[month.abb] - cove[month.abb])
View(cove[month.abb])
data <- read.table("HadCRUT4-gl-dowload20170601.dat", fill = TRUE)
View(data)
names(data) = c("Year", month.abb, "Annual")
temp <- data[seq(1, nrow(data), by = 2),]
cove <- data[seq(2, nrow(data), by = 2),]
mat = (cove[month.abb] == 0)
View(mat)
mat = (cove[month.abb] == 0) * NA
View(mat)
mat = (cove[month.abb] == 0)
mat[mat] = NA
View(mat)
mat = !(cove[month.abb] == 0)
mat[!mat] = NA
View(mat)
temp[month.abb] = temp[month.abb] * mat
View(temp)
((mat = !(cove[month.abb] == 0))[!mat] = NA)
mat = !(cove[month.abb] == 0)
mat[!mat] = NA
temp[month.abb] = temp[month.abb] * mat
save(temp, file = "r/HadCRUT4-gl-download20170601.RData")
library(jsonlite)
toJSON(temp)
?toJSON
cat(toJSON(temp))
cat(toJSON(temp, pretty = T))
?write
write(toJSON(temp, pretty = T), file = "js/HadCRUT4-gl-download20170601.json")
write(paste("data =", toJSON(temp, pretty = T)), file = "js/HadCRUT4-gl-download20170601.json")
setwd("~/Documents/compare-dataviz-tools/r")
library(ggplot2)
load("HadCRUT4-gl-download20170601.RData")
ggplot(temp, aes(Year, Annual)) +
geom_line()
temp = transform(temp,
min = min(Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec),
max = min(Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec))
?geom_area
ggplot(temp, aes(Year, Annual)) +
geom_line() +
geom_area(aes(ymain = min, ymax = max))
ggplot(temp, aes(Year, Annual)) +
geom_line() +
geom_area(aes(ymin = min, ymax = max))
ggplot(temp, aes(Year, Annual)) +
geom_line() +
geom_ribbon(aes(ymin = min, ymax = max))
ggplot(temp, aes(Year, Annual)) +
geom_line() +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80")
View(temp)
load("HadCRUT4-gl-download20170601.RData")
temp$min = min(temp[month.abb], na.rm = TRUE)
temp$max = max(temp[month.abb], na.rm = TRUE)
ggplot(temp, aes(Year, Annual)) +
geom_line() +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80")
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80") +
geom_line()
temp$min
load("HadCRUT4-gl-download20170601.RData")
temp$min = apply(temp[month.abb], 1, min, na.rm = TRUE)
temp$max = apply(temp[month.abb], 1, max, na.rm = TRUE)
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80") +
geom_line()
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80") +
geom_line() +
theme_minimal()
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "grey80") +
geom_line() +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line() +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max))
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max))
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max)) +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray80") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
geom_rect(xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_text(x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
?geom_text
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min) - 1, ymax = max(temp$max) + 1, fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ymin = min(temp$min), ymax = max(temp$max),
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
# annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_text(xmin = 1961 xmax = 1990, fill = "red") +
ggplot(temp, aes(Year, Annual)) +
# annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_text(xmin = 1961, xmax = 1990, fill = "red") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
# annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_rect(xmin = 1961, xmax = 1990, fill = "red") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
?geom_rect
ggplot(temp, aes(Year, Annual)) +
# annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
geom_rect(xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "red") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
# annotate("rect", xmin = 1961, xmax = 1990, ymin = min(temp$min), ymax = max(temp$max), fill = "gray90") +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "red") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = min(temp$min), label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period") +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
?annotate
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = 1) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -1) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -1, hjust = -1) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -1, hjust = 0) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = 0, hjust = 0) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -.5, hjust = 0) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -.5, hjust = 0, size = .5) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -.5, hjust = 0, size = 2) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
ggplot(temp, aes(Year, Annual)) +
annotate("rect", xmin = 1961, xmax = 1990, ymin = -Inf, ymax = +Inf, fill = "gray90") +
annotate("text", x = 1961, y = -Inf, label = "Reference period", vjust = -.5, hjust = 0, size = 3) +
geom_hline(yintercept = 0, lty = 2, color = "gray70") +
geom_ribbon(aes(ymin = min, ymax = max), fill = "lightblue") +
geom_line(color = "steelblue") +
theme_minimal() +
labs(x = "", y = "Temperature anomaly")
